@page "/history"

<Title>
    @_title
</Title>

<MudGrid>
    <MudItem xs="12">
        <MudPaper Class="pa-4">
            <MudText Typo="Typo.h4">
                @_title
            </MudText>
        </MudPaper>
    </MudItem>
</MudGrid>

@if(_response != null)
{
    <MudGrid>
        <MudItem xs="12">
            <MudDataGrid Items="@_response.ChatHistories">
                <Columns>
                    <PropertyColumn Property="x => x.Summary" Title="Summary" />
                    <PropertyColumn Property="x => x.CreatedOn" Title="Created" />
                    <TemplateColumn CellClass="d-flex justify-end">
                        <CellTemplate>
                            <MudStack Row>
                            <MudButton Size="@Size.Small" Variant="@Variant.Filled" OnClick="() => NavigateToExistingChat(context.Item.Id)" Color="@Color.Primary">View Chat</MudButton>
                        </MudStack>
                    </CellTemplate>
                </TemplateColumn>
            </Columns>
            <NoRecordsContent>
                <MudAlert Severity="Severity.Info">
                    No history has been recorded yet.
                </MudAlert>
            </NoRecordsContent>
        </MudDataGrid>
        </MudItem>
    </MudGrid>    
}