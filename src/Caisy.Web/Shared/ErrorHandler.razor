@using Microsoft.Extensions.Logging
@inject ILogger<ErrorHandler> Logger

@if (_message is not null)
{
    <MudAlert Severity="Severity.Error" ShowCloseIcon="true" CloseIconClicked="ResetState" Class="mb-2">
        @_message
    </MudAlert>
}
<CascadingValue Value="this">
    @ChildContent
</CascadingValue>



@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    private string? _message;

    public void ProcessError(Exception ex)
    {
        Logger.LogError("Error:ProcessError - Type: {Type} Message: {Message}",
            ex.GetType(), ex.Message);

        _message = ex.Message;

        StateHasChanged();
    }

    private void ResetState()
    {
        _message = null;

        StateHasChanged();
    }
}